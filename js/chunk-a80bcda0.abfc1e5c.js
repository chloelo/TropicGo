(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a80bcda0"],{"658f":function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"front front-product"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),t.product.imageUrl[0]?a("section",{staticClass:"zones zone_detail_bg",style:"background-image:url("+t.product.imageUrl[0]+")"}):t._e(),a("section",{staticClass:"zones zone_detail"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-7"},[a("div",{staticClass:"img-wrap mb-3"},[a("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl[0]}})])]),a("div",{staticClass:"col-lg-5"},[a("div",{staticClass:"product-wrap"},[a("nav",{attrs:{"aria-label":"breadcrumb"}},[a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:"/"}},[t._v(" 首頁 ")])],1),a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:"/products"}},[t._v(" 產品列表 ")])],1),a("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" "+t._s(t.product.title)+" ")])])]),a("h2",{staticClass:"mb-lg-3 mb-4"},[t._v(" "+t._s(t.product.title)+" ")]),a("p",[t._v(t._s(t.product.content))]),a("ul",{staticClass:"list-unstyled"},[t.product.options.popular?a("li",[t._m(0),t._v(" 熱門商品 ")]):t._e(),a("li",[t._m(1),t._v(" 出發城市："+t._s(t.product.options.departureCity)+" ")]),t._m(2),t._m(3)]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[a("div",[a("del",{staticClass:"text-black-50"},[t._v("原價 "+t._s(t._f("money")(t.product.origin_price)))])]),a("div",{staticClass:"text-secondary"},[t._v(" 特價 "),a("span",{staticClass:"h4"},[t._v(t._s(t._f("money")(t.product.price)))])])]),a("form",[a("div",{staticClass:"form-row mt-3"},[a("div",{staticClass:"form-group col-md-6"},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{disabled:1===t.product.quantity,type:"button"},on:{click:function(s){t.product.quantity-=1}}},[t._m(4)])]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.product.quantity,expression:"product.quantity",modifiers:{number:!0}}],staticClass:"form-control text-center pl-4",attrs:{type:"number",min:"1","aria-describedby":"basic-addon1"},domProps:{value:t.product.quantity},on:{input:function(s){s.target.composing||t.$set(t.product,"quantity",t._n(s.target.value))},blur:function(s){return t.$forceUpdate()}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary ",attrs:{type:"button"},on:{click:function(s){t.product.quantity+=1}}},[t._m(5)])])])]),a("div",{staticClass:"form-group col-md-6"},[a("button",{staticClass:"btn btn-secondary btn-block",attrs:{type:"button"},on:{click:function(s){return t.addToCart(t.product.id,t.product.quantity)}}},[t.product.id===t.status.loadingItem?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):a("span",[a("i",{staticClass:"fas fa-shopping-cart"})]),t._v(" 立即報名 ")])])])]),a("div",{staticClass:"d-flex justify-content-between align-items-center"},[t.product.quantity?a("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v(" 小計 "),a("strong",[t._v(t._s(t._f("money")(t.product.quantity*t.product.price||0)))]),t._v(" 元 ")]):t._e(),a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(s){return t.updateFavorites(t.product.id)}}},[-1===t.favorites.indexOf(t.product.id)?a("span",[t._m(6),t._v(" 加入收藏 ")]):a("span",[t._m(7),t._v(" 已加入收藏 ")])])])])])])])]),a("section",{staticClass:"description-wrap zones"},[a("div",{staticClass:"container "},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"description"},[t._m(8),a("div",{domProps:{innerHTML:t._s(t.product.description)}})])])])])]),a("section",{staticClass:"zones zone_maylike"},[a("div",{staticClass:"container"},[a("h3",{staticClass:"mb-4"},[t._v(" 猜您可能會喜歡... ")]),a("div",{staticClass:"row row-cols-1 row-cols-md-2 row-cols-lg-3"},t._l(t.filterCategory,(function(s){return a("div",{key:s.id,staticClass:"col mb-4"},[a("div",{staticClass:"card h-100 border-0 shadow-sm"},[a("div",{staticClass:"img-wrap"},[a("img",{staticClass:"card-img-top",attrs:{src:s.imageUrl[0]}})]),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(" "+t._s(s.title)+" ")]),a("p",{staticClass:"card-text ellipsis"},[t._v(" "+t._s(s.content)+" ")]),a("p",{staticClass:"prices d-flex justify-content-between align-items-center"},[a("span",{staticClass:"price_origin"},[t._v(t._s(t._f("money")(s.origin_price))+"/人")]),a("span",{staticClass:"price_discount"},[t._v(t._s(t._f("money")(s.price))+"/人")])]),a("button",{staticClass:" mt-3 btn btn-outline-secondary btn-addTocart btn-block",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.toProduct(s.id)}}},[t._v(" 前往查看 "),t._m(9,!0)])])])])})),0)])])],1)},e=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"icon icon-popular"},[a("i",{staticClass:"fas fa-fire"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-plane-departure"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-users"})]),t._v(" 成團人數：15 人 ")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-dollar-sign"})]),t._v(" 費用已含：機場稅、燃油費 ")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",[a("i",{staticClass:"fas fa-minus"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",[a("i",{staticClass:"fas fa-plus"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",[a("i",{staticClass:"far fa-heart "})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",[a("i",{staticClass:"fas fa-heart"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("h3",{staticClass:"mb-5 title-dec"},[a("span",{staticClass:"circle"}),a("span",{staticClass:"txt text-primary"},[t._v("產品特色")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",[a("i",{staticClass:"fas fa-chevron-right"})])}],c=(a("99af"),a("4de4"),a("c975"),a("a434"),{data:function(){return{isLoading:!1,product:{imageUrl:[],options:{},quantity:1},products:[],status:{loadingItem:""},favorites:JSON.parse(localStorage.getItem("favoritesID"))||[]}},computed:{filterCategory:function(){var t=this;return this.products.filter((function(s){return s.id!==t.product.id&&s.category===t.product.category}))}},created:function(){this.getProduct(),this.getProducts(),this.winScroll()},methods:{toProduct:function(t){this.$router.push("/product/".concat(t)),this.getProduct(),this.winScroll()},getProducts:function(){var t=this;this.isLoading=!0,this.$http.get("".concat("https://course-ec-api.hexschool.io/api","/").concat("27645507-6c88-4d1b-816f-1587210ac2be","/ec/products")).then((function(s){t.isLoading=!1,t.products=s.data.data})).catch((function(){t.isLoading=!1}))},getProduct:function(){var t=this;this.isLoading=!0;var s=this.$route.params.id;this.$http.get("".concat("https://course-ec-api.hexschool.io/api","/").concat("27645507-6c88-4d1b-816f-1587210ac2be","/ec/product/").concat(s)).then((function(s){t.isLoading=!1,t.product=s.data.data,t.$set(t.product,"quantity",1)})).catch((function(){t.isLoading=!1}))},addToCart:function(t){var s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0,this.status.loadingItem=t;var i="".concat("https://course-ec-api.hexschool.io/api","/").concat("27645507-6c88-4d1b-816f-1587210ac2be","/ec/shopping"),e={product:t,quantity:a};this.$http.post(i,e).then((function(){s.isLoading=!1,s.status.loadingItem="",s.$bus.$emit("msg:push","商品成功加入購物車~","success"),s.$bus.$emit("get-cart")})).catch((function(t){s.isLoading=!1,s.status.loadingItem="",s.$bus.$emit("msg:push","出現錯誤！ ".concat(t.response.data.errors[0]),"danger")}))},updateFavorites:function(t){var s=this.favorites.indexOf(t);-1===s?(this.favorites.push(t),this.$bus.$emit("msg:push","已新增此筆收藏","success")):(this.favorites.splice(s,1),this.$bus.$emit("msg:push","已取消此筆收藏","danger")),localStorage.setItem("favoritesID",JSON.stringify(this.favorites))},winScroll:function(){var t=$(window).scrollTop();t>=10&&$("html,body").animate({scrollTop:0},700)}}}),n=c,r=a("2877"),o=Object(r["a"])(n,i,e,!1,null,null,null);s["default"]=o.exports},c975:function(t,s,a){"use strict";var i=a("23e7"),e=a("4d64").indexOf,c=a("a640"),n=a("ae40"),r=[].indexOf,o=!!r&&1/[1].indexOf(1,-0)<0,l=c("indexOf"),u=n("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:o||!l||!u},{indexOf:function(t){return o?r.apply(this,arguments)||0:e(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-a80bcda0.abfc1e5c.js.map